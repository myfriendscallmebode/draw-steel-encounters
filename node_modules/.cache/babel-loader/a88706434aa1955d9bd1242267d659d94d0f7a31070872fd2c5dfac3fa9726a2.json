{"ast":null,"code":"import React,{useState,useEffect}from'react';import{calculateEncounterStrength,determineEncounterDifficulty}from'./utils/encounterCalculations';import{sampleMonsters}from'./data/sampleMonsters';import{PartyInput}from'./components/PartyInput';import{MonsterSearch}from'./components/MonsterSearch';import{EncounterDisplay}from'./components/EncounterDisplay';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[party,setParty]=useState({heroCount:4,heroLevel:3,victories:0,encounterStrength:0});const[encounter,setEncounter]=useState({creatures:[],totalEV:0,difficulty:'trivial'});// Calculate encounter strength whenever party changes\nuseEffect(()=>{const newES=calculateEncounterStrength(party);setParty(prev=>({...prev,encounterStrength:newES}));},[party.heroCount,party.heroLevel,party.victories]);// Calculate encounter difficulty whenever encounter changes\nuseEffect(()=>{const newDifficulty=determineEncounterDifficulty(party.encounterStrength,encounter.totalEV,party.heroLevel);setEncounter(prev=>({...prev,difficulty:newDifficulty}));},[encounter.totalEV,party.encounterStrength,party.heroLevel]);const handleAddMonster=monster=>{setEncounter(prev=>{const existingIndex=prev.creatures.findIndex(c=>c.monster.id===monster.id);if(existingIndex>=0){// Update quantity of existing monster\nconst updatedCreatures=[...prev.creatures];updatedCreatures[existingIndex]={...updatedCreatures[existingIndex],quantity:updatedCreatures[existingIndex].quantity+1};const newTotalEV=updatedCreatures.reduce((sum,c)=>sum+c.monster.encounterValue*c.quantity,0);return{...prev,creatures:updatedCreatures,totalEV:newTotalEV};}else{// Add new monster\nconst newCreature={monster,quantity:1};const newTotalEV=prev.totalEV+monster.encounterValue;return{...prev,creatures:[...prev.creatures,newCreature],totalEV:newTotalEV};}});};const handleRemoveCreature=index=>{setEncounter(prev=>{const creature=prev.creatures[index];const newTotalEV=prev.totalEV-creature.monster.encounterValue*creature.quantity;const newCreatures=prev.creatures.filter((_,i)=>i!==index);return{...prev,creatures:newCreatures,totalEV:newTotalEV};});};const handleUpdateQuantity=(index,quantity)=>{setEncounter(prev=>{const updatedCreatures=[...prev.creatures];const creature=updatedCreatures[index];const oldTotal=creature.monster.encounterValue*creature.quantity;const newTotal=creature.monster.encounterValue*quantity;updatedCreatures[index]={...creature,quantity};const newTotalEV=prev.totalEV-oldTotal+newTotal;return{...prev,creatures:updatedCreatures,totalEV:newTotalEV};});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-900 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-white mb-2\",children:\"Draw Steel Encounter Builder\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Build balanced encounters for your tabletop RPG\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(PartyInput,{party:party,onPartyChange:setParty}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(MonsterSearch,{monsters:sampleMonsters,onAddMonster:handleAddMonster}),/*#__PURE__*/_jsx(EncounterDisplay,{encounter:encounter,party:party,onRemoveCreature:handleRemoveCreature,onUpdateQuantity:handleUpdateQuantity})]})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","calculateEncounterStrength","determineEncounterDifficulty","sampleMonsters","PartyInput","MonsterSearch","EncounterDisplay","jsx","_jsx","jsxs","_jsxs","App","party","setParty","heroCount","heroLevel","victories","encounterStrength","encounter","setEncounter","creatures","totalEV","difficulty","newES","prev","newDifficulty","handleAddMonster","monster","existingIndex","findIndex","c","id","updatedCreatures","quantity","newTotalEV","reduce","sum","encounterValue","newCreature","handleRemoveCreature","index","creature","newCreatures","filter","_","i","handleUpdateQuantity","oldTotal","newTotal","className","children","onPartyChange","monsters","onAddMonster","onRemoveCreature","onUpdateQuantity"],"sources":["/Users/aaronbode/Development/projects/encounter_builder/encounter-builder/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Party, Encounter, EncounterCreature, Monster } from './types';\nimport { calculateEncounterStrength, determineEncounterDifficulty } from './utils/encounterCalculations';\nimport { sampleMonsters } from './data/sampleMonsters';\nimport { PartyInput } from './components/PartyInput';\nimport { MonsterSearch } from './components/MonsterSearch';\nimport { EncounterDisplay } from './components/EncounterDisplay';\nimport './App.css';\n\nfunction App() {\n  const [party, setParty] = useState<Party>({\n    heroCount: 4,\n    heroLevel: 3,\n    victories: 0,\n    encounterStrength: 0\n  });\n\n  const [encounter, setEncounter] = useState<Encounter>({\n    creatures: [],\n    totalEV: 0,\n    difficulty: 'trivial'\n  });\n\n  // Calculate encounter strength whenever party changes\n  useEffect(() => {\n    const newES = calculateEncounterStrength(party);\n    setParty(prev => ({ ...prev, encounterStrength: newES }));\n  }, [party.heroCount, party.heroLevel, party.victories]);\n\n  // Calculate encounter difficulty whenever encounter changes\n  useEffect(() => {\n    const newDifficulty = determineEncounterDifficulty(party.encounterStrength, encounter.totalEV, party.heroLevel);\n    setEncounter(prev => ({ ...prev, difficulty: newDifficulty }));\n  }, [encounter.totalEV, party.encounterStrength, party.heroLevel]);\n\n  const handleAddMonster = (monster: Monster) => {\n    setEncounter(prev => {\n      const existingIndex = prev.creatures.findIndex(c => c.monster.id === monster.id);\n      \n      if (existingIndex >= 0) {\n        // Update quantity of existing monster\n        const updatedCreatures = [...prev.creatures];\n        updatedCreatures[existingIndex] = {\n          ...updatedCreatures[existingIndex],\n          quantity: updatedCreatures[existingIndex].quantity + 1\n        };\n        \n        const newTotalEV = updatedCreatures.reduce((sum, c) => sum + (c.monster.encounterValue * c.quantity), 0);\n        return {\n          ...prev,\n          creatures: updatedCreatures,\n          totalEV: newTotalEV\n        };\n      } else {\n        // Add new monster\n        const newCreature: EncounterCreature = {\n          monster,\n          quantity: 1\n        };\n        \n        const newTotalEV = prev.totalEV + monster.encounterValue;\n        return {\n          ...prev,\n          creatures: [...prev.creatures, newCreature],\n          totalEV: newTotalEV\n        };\n      }\n    });\n  };\n\n  const handleRemoveCreature = (index: number) => {\n    setEncounter(prev => {\n      const creature = prev.creatures[index];\n      const newTotalEV = prev.totalEV - (creature.monster.encounterValue * creature.quantity);\n      const newCreatures = prev.creatures.filter((_, i) => i !== index);\n      \n      return {\n        ...prev,\n        creatures: newCreatures,\n        totalEV: newTotalEV\n      };\n    });\n  };\n\n  const handleUpdateQuantity = (index: number, quantity: number) => {\n    setEncounter(prev => {\n      const updatedCreatures = [...prev.creatures];\n      const creature = updatedCreatures[index];\n      const oldTotal = creature.monster.encounterValue * creature.quantity;\n      const newTotal = creature.monster.encounterValue * quantity;\n      \n      updatedCreatures[index] = {\n        ...creature,\n        quantity\n      };\n      \n      const newTotalEV = prev.totalEV - oldTotal + newTotal;\n      \n      return {\n        ...prev,\n        creatures: updatedCreatures,\n        totalEV: newTotalEV\n      };\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <header className=\"text-center mb-8\">\n          <h1 className=\"text-4xl font-bold text-white mb-2\">Draw Steel Encounter Builder</h1>\n          <p className=\"text-gray-400\">Build balanced encounters for your tabletop RPG</p>\n        </header>\n\n        <div className=\"max-w-6xl mx-auto\">\n          <PartyInput party={party} onPartyChange={setParty} />\n          \n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <MonsterSearch monsters={sampleMonsters} onAddMonster={handleAddMonster} />\n            <EncounterDisplay\n              encounter={encounter}\n              party={party}\n              onRemoveCreature={handleRemoveCreature}\n              onUpdateQuantity={handleUpdateQuantity}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}